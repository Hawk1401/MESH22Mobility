google.maps.__gjsload__('visualization_impl', function(_){var Sob=function(){if(null!=Rob)return Rob;var a=document.createElement("canvas");return Rob=!(!a.getContext||!a.getContext("2d"))},Y$=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=0;c=Array(a);for(var d=0;d<a;++d)c[d]=b.concat();return c},Tob=function(a){if(!a||!a.getLength())return 1;var b=new _.Jf;a.forEach(function(l){l&&b.extend(l.location?l.location:l)});var c=b.wb.h,d=b.Sa.h,e=Math.max(b.wb.j-c,b.Sa.j-d);if(1E-9>e){var f=0;a.forEach(function(l){l instanceof _.Ee?++f:f+=l.weight});return Math.max(1,
f)}var g=800/e,h=Y$(800),k=1;a.forEach(function(l){if(l){var m=l.location?l.location:l;l=l.weight||1;m=new _.I(Math.max(0,Math.min(799,Math.floor((m.lat()-c)*g))),Math.max(0,Math.min(799,Math.floor((m.lng()-d)*g))));h[m.x][m.y]+=l;k=Math.max(k,h[m.x][m.y])}});return k},Vob=function(a,b){var c=[],d=[],e=1E3/(a.length-1);_.ab(a,function(h,k){c.push(k*e);d.push(_.YB(h))});a=Array(1001);for(var f=0,g=0;1001>g;++g)g>c[f+1]&&++f,a[g]=f<c.length-1?Uob(e*f,g,e*(f+1),d[f],d[f+1]):d[d.length-1],a[g].alpha*=
b,a[g].alpha=_.be(Math.floor(255*a[g].alpha),0,255);return a},Uob=function(a,b,c,d,e){if(a==c)return d;a=(b-a)/(c-a);return new _.WB(Math.floor((e.l-d.l)*a+d.l),Math.floor((e.j-d.j)*a+d.j),Math.floor((e.h-d.h)*a+d.h),(e.alpha-d.alpha)*a+d.alpha)},Wob=function(a,b){this.m=a;this.j=b;this.h=1;this.l=[]},Yob=function(a,b,c){_.pm(b.div,"");if(Sob()){var d=b.ownerDocument,e,f=e=d.createElement("canvas");_.Dm(f);f.width=f.height=256;f=f.getContext("2d");var g=1<a.h;b.div.appendChild(e);b=Xob(a,b);e=a.l;
for(var h=Math.floor(e.length/2),k=b.length,l=k-h,m=Y$(k),p=0;p<k;++p)for(var q=b[p],r=m[p],t=0;t<k;++t){var v=q[t];if(v)for(var w=t-h,y=Math.min(l,t+h+1),z=Math.max(h,w);z<y;++z)r[z]+=v*e[z-w]}b=Y$(k-2*h);for(p=0;p<k;++p)for(q=m[p],r=Math.max(h,p-h),t=Math.min(l,p+h+1),v=p-h,w=h,y=0;w<l;++w,++y)if(z=q[w])for(var L=r;L<t;++L)b[L-h][y]+=z*e[L-v];e=Math.ceil(256/a.h);e=f.createImageData(e,e);h=a.get("gradient");k=h[h.length-1];c=h.length/c;l=e.data;p=m=0;for(q=b.length;p<q;++p)for(r=b[p],t=0,v=r.length;t<
v;++t)(w=r[t])||h[0].alpha?(w=h[Math.floor(w*c)]||k,l[m++]=w.l,l[m++]=w.j,l[m++]=w.h,l[m++]=w.alpha):m+=4;g?(d=d.createElement("canvas"),d.width=d.height=256/a.h,d.getContext("2d").putImageData(e,0,0),f.scale(a.h,a.h),f.drawImage(d,0,0)):f.putImageData(e,0,0)}},Xob=function(a,b){var c=a.get("projection");c=_.ll(c);var d=a.get("radius");d=Math.round(d/a.h)*a.h;var e=b.vg,f=(256+2*d)/a.h,g=Y$(f),h;for(h in e){var k=e[h],l=c.fromLatLngToPoint(new _.Ee(k.Ea,k.Ba,!0)),m=c.fromLatLngToPoint(new _.Ee(k.Na,
k.Ga,!0)),p=null;p=_.Vn(a.j,new _.Ug(l.x,l.y),b.zoom,function(w){return w});m=_.Vn(a.j,new _.Ug(m.x,m.y),b.zoom,function(w){return w});l=d/256;p=_.Zn(a.j,{xa:Math.min(p.xa,m.xa)+l,ya:Math.min(p.ya,m.ya)+l,Fa:b.zoom});p=new _.I(p.h,p.j);k=a.m.search(k);m=0;for(l=k.length;m<l;++m){var q=k[m],r=c.fromLatLngToPoint(new _.Ee(q.ub.x,q.ub.y)),t=0,v=0;r=_.nla(a.j,new _.Ug(r.x,r.y),new _.Ug(p.x,p.y),b.zoom);t=Math.floor(256*r.xa);v=Math.floor(256*r.ya);r=Math.floor((v+d)/a.h);t=Math.floor((t+d)/a.h);0<=r&&
r<f&&0<=t&&t<f&&(g[r][t]+=q.weight)}}return g},$$=function(a,b){b=void 0===b?_.mo:b;var c=this;this.o=b;this.D=new _.ig(256,256);this.h={};b=_.Ch(-100,-300,100,300);this.C=new _.sB(b,void 0);b=_.Ch(-90,-180,90,180);this.l=_.Hra(b,function(d,e){return d.ub.equals(e.ub)&&d.weight==e.weight});this.J=[];this.F=new _.bh;this.j=0;this.m=new Wob(this.l,this.o);this.m.bindTo("projection",this,"projection",!0);this.m.bindTo("gradient",this,"gradient",!0);this.m.bindTo("radius",this,"radius",!0);a(this.F,function(d){return Yob(c.m,
d,c.j)});this.H=new _.Di(function(){var d=c.j;c.j=Zob(c);_.de(d,c.j)||Z$(c)},0);this.addListener("data_changed",function(){return $ob(c)});this.addListener("maxintensity_changed",function(){c.j=Zob(c);Z$(c)});this.addListener("gradient_changed",function(){Z$(c)});this.addListener("opacity_changed",function(){var d=c.get("opacity"),e;for(e in c.h)c.h.hasOwnProperty(e)&&_.Mt(c.h[e].div,d)});this.addListener("radius_changed",function(){for(var d in c.h)if(c.h.hasOwnProperty(d)){var e=c.h[d],f=void 0,
g=e.vg;for(f in g)g.hasOwnProperty(f)&&c.C.remove(g[f]);e.vg={};apb(c,e)}Z$(c)});this.triggersTileLoadEvent=!0},apb=function(a,b){var c={xa:b.Eb.x,ya:b.Eb.y,Fa:b.zoom},d=a.get("radius"),e=_.ll(a.get("projection")),f=_.Zn(a.o,c);f=new _.I(f.h,f.j);d=_.at(a.o,c,d/256);c=d.min;d=d.max;c=_.Ch(c.h,c.j,d.h,d.j);_.Ira(c,e,f,function(g){g.h=b;b.vg[_.nf(g)]=g;_.tB(a.C,g)})},Zob=function(a){var b=a.get("maxIntensity");return 1<=b?b:Tob(a.get("data"))},$ob=function(a){a.l.clear();var b=a.get("data");b&&(b.forEach(function(e){e&&
_.wB(a.l,bpb(e))}),a.H.Gd());Z$(a);for(var c=_.A(a.J),d=c.next();!d.done;d=c.next())_.F.removeListener(d.value);a.J=b?[b.addListener("insert_at",function(e){return cpb(a,e)}),b.addListener("remove_at",function(e,f){return dpb(a,f)}),b.addListener("set_at",function(e,f){dpb(a,f);cpb(a,e)})]:[]},cpb=function(a,b){if(b=a.get("data").getAt(b))b=bpb(b),_.wB(a.l,b),a.H.Gd(),epb(a,b.ub)},dpb=function(a,b){b&&(b=bpb(b),a.l.remove(b),a.H.Gd(),epb(a,b.ub))},epb=function(a,b){b=_.Gra(a.C,b);b=_.A(b);for(var c=
b.next();!c.done;c=b.next())_.ch(a.F,c.value.h)},Z$=function(a){for(var b in a.h)a.h.hasOwnProperty(b)&&_.ch(a.F,a.h[b])},bpb=function(a){var b=a.location?a.location:a;a=a.weight||1;return{ub:new _.I(b.lat(),b.lng()),weight:a}},fpb=function(a,b){var c=new _.EA(_.Yqa(250));this.h=a;a.h=(0,_.Na)(this.l,this);this.o=b;this.j=c},gpb=function(){},Rob,hpb="rgba(102, 255, 0, 0);rgba(102, 255, 0, 1);rgba(147, 255, 0, 1);rgba(193, 255, 0, 1);rgba(238, 255, 0, 1);rgba(244, 227, 0, 1);rgba(249, 198, 0, 1);rgba(255, 170, 0, 1);rgba(255, 113, 0, 1);rgba(255, 57, 0, 1);rgba(255, 0, 0, 1)".split(";");_.C(Wob,_.G);Wob.prototype.radius_changed=function(){var a=this.get("radius");Sob()?this.h=20>a?1:2:this.h=4;a=Math.round(a/this.h);for(var b=a/3,c=[],d=-a;d<=a;d++)c.push(Math.exp(-d*d/(2*b*b)));this.l=c};_.B($$,_.oj);$$.prototype.Ld=function(){return{tileSize:{na:this.D.width,ra:this.D.height},zb:this.o,Td:2,$d:this.L.bind(this)}};
$$.prototype.L=function(a,b){var c=this,d=(void 0===b?{}:b).Dc,e=document.createElement("div");_.Ih(e,this.D);b=this.get("opacity");void 0!==b&&_.Mt(e,b);var f={div:e,zoom:a.Fa,Eb:new _.I(a.xa,a.ya),vg:{},ownerDocument:document};e.ad=f;this.h[_.nf(f)]=f;apb(this,f);this.j||(this.j=Zob(this));Yob(this.m,f,this.j);var g=!1;a=_.x.Promise.resolve();a.then(function(){g=!0});return{xb:function(){return e},Ae:function(){return g},loaded:a,release:function(){_.pm(e,"");delete c.h[_.nf(f)];d&&d()}}};
$$.prototype.releaseTile=function(a){if(a){var b=a.ad;a.ad=null;delete this.h[_.nf(b)];a=this.C;for(var c in b.vg)b.vg.hasOwnProperty(c)&&a.remove(b.vg[c]);_.pm(b.div,"")}};fpb.prototype.l=function(){_.yA(this.j,(0,_.Na)(this.m,this))};fpb.prototype.m=function(){a:{var a=this.h.Hd();for(var b in a){a=a[b];this.h.remove(a);break a}a=null}a&&this.o(a)};gpb.prototype.h=function(a){var b=a.je,c=a.je=a.get("map");b&&(a.h&&(a.h.unbindAll(),a.h=null),a.j&&(a.j.release(),a.j=null));if(c){var d=function(){k&&k.unbindAll();k=new $$(g,h);c&&k.bindTo("projection",c);k.bindTo("data",a);k.bindTo("maxIntensity",a);k.bindTo("gradient",e,"colorGradient");k.bindTo("radius",f,"renderingRadius");a.h&&(k.bindTo("opacity",a.h),e.set("opacity",1))};a.h=new _.Uq({dissipating:!0,gradient:hpb,opacity:.6,radius:10});a.h.bindTo("dissipating",a);a.h.bindTo("gradient",a);
a.h.bindTo("opacity",a);a.h.bindTo("radius",a);var e=new _.MA(["stringGradient","opacity"],"colorGradient",function(p,q){return Vob(p,q)});e.bindTo("stringGradient",a.h,"gradient",!0);var f=new _.MA(["radius","dissipating","zoom"],"renderingRadius",function(p,q,r){return q?p:Math.min(Math.round(p*Math.pow(2,r)),256)});f.bindTo("radius",a.h);f.bindTo("zoom",c);f.bindTo("dissipating",a.h);var g=function(p,q){new fpb(p,q)};b=c.__gm;var h=void 0,k=null;d();var l=k.Ld(),m=_.Gg(l);b.j.then(function(p){p.cj.Tb(function(q){q&&
h!=q.zb&&(h=q.zb,d(),m.set(k.Ld()))})});_.DB(c,m,"overlayLayer",15,{Cr:function(p){a.j&&a.j.release();a.j=p}});_.og(c,"Lh")}};_.bf("visualization_impl",new gpb);});
